{% extends 'base.html' %} {% block content %}

<div class="container">

    <div class="row">
        <div class="col s12 l6">
            <h4>Hi {{user.userName}}</h4>
            <p>Your drinks have had a total of {{views}} views</p>
            <p>Drinks submitted by you have been favorited a total of {{favorites}} times</p>
        </div>
        <div class="col s12 l6">
            <div class="row">
                <div class="col s6">
                    <p>Your most viewed drink is</p>
                    {% if most_viewed.views %}
                        <p>{{most_viewed.name}}</p>
                        <p>with {{most_viewed.views}} views.</p>
                    {% else %}
                        <p>Either you haven't submitted any drinks yet, or they have had no views</p>
                    {% endif %}
                </div>
                <div class="col s6">
                    {% if most_viewed.views %}
                        <p>pic: {{most_viewed.imageUrl}}</p>
                    {% else %}
                        <p>Something for no pic</p>
                    {% endif %}
                </div>
            </div>
            <div class="row">
                <div class="col s6">
                    {% if most_favorited.favorites %}
                        <p>pic: {{most_favorited.imageUrl}}</p>
                    {% else %}
                        <p>Something for no pic</p>
                    {% endif %}
                </div>
                <div class="col s6">
                    <p>Your most favorited drink is</p>
                    {% if most_favorited.favorites %}
                        <p>{{most_favorited.name}}</p>
                        <p>with {{most_favorited.favorites}} users adding it to their favorites.</p>
                    {% else %}
                        <p>Either you haven't submitted any drinks, or they have had not been favorited by anyone yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!--Users Submitted Drinks-->
    <div class="row">
        <h4>Drinks Submitted By You</h4>
        <h6>** Most recent first **</h6>

        <!--Summary-->
        {% if total_drinks_by_user > 0 %}
        <div class="row center">
            <h6>Showing {{first_dr_result_num}} - {{last_dr_result_num}} of {{total_drinks_by_user}} results</h6>
        </div>
        {% else %}
        <h6>No Drinks Submitted Yet. <a href="{{ url_for('add_drink') }}">Add One Now</a></h6>
        {% endif %}

        <div class="row">
            {% for drink in users_drinks %}
            <div class="col s3 border-outline">
                <p class="center">{{drink.name}}</p>
                <a href="{{ url_for('drink', drink_id = drink._id) }}">Click To View</a>
            </div>
            {% endfor %}
        </div>
        <!--Pagination-->
        {% if total_drinks_by_user > 4 %}
        <ul class="pagination center">
            <!--Left Arrow-->
            {% if drinks_page | int > 1 %}
            <li class=""><a href="{{ url_for('account',
                    account_name = session.username,
                    drinks_page=drinks_page-1,
                    favorites_page=favorites_page) }}"><i class="material-icons">arrow_left</i></a></li>
            {% else %}
            <li class="disabled"><i class="material-icons">arrow_left</i></li>
            {% endif %}
            <!--Page Numbers-->
            {% for dr_page_number in dr_pages %} {% if dr_page_number == drinks_page %}
            <li class="active"><a>{{ dr_page_number }}</a></li>
            {% else %}
            <li class="waves-effect"><a href="{{ url_for('account',
                        account_name = session.username,
                        drinks_page=dr_page_number,
                        favorites_page=favorites_page) }}">{{ dr_page_number }}</a></li>
            {% endif %} {% endfor %}
            <!--Right Arrow-->
            {% if drinks_page | int
            < dr_pages | count | int %} <li class=""><a href="{{ url_for('account',
                    account_name = session.username,
                    drinks_page=drinks_page+1,
                    favorites_page=favorites_page) }}"><i class="material-icons">arrow_right</i></a></li>
                {% else %}
                <li class="disabled"><i class="material-icons">arrow_right</i></li>
                {% endif %}

        </ul>
        {% endif %}
    </div>

    <!--Users Favorite Drinks-->
    <div class="row">
        <h4>Drinks Favorited By You</h4>
        <!--Summary-->
        {% if total_fave_drinks_by_user > 0 %}
        <div class="row center">
            <h6>Showing {{first_fv_result_num}} - {{last_fv_result_num}} of {{total_fave_drinks_by_user}} results</h6>
        </div>
        {% else %}
        <h6>No Drinks Favorited Yet</h6>
        {% endif %}
        <div class="row">
            {% for drink in favorited_drinks %}
            <div class="col s3 border-outline">
                <p class="center">{{drink.name}}</p>
                <a href="{{ url_for('drink', drink_id = drink._id) }}">Click To View</a>
            </div>
            {% endfor %}
        </div>
        <!--Pagination-->
        {% if total_fave_drinks_by_user > 4 %}
        <ul class="pagination center">
            <!--Left Arrow-->
            {% if favorites_page | int > 1 %}
            <li class=""><a href="{{ url_for('account',
                    account_name = session.username,
                    drinks_page=drinks_page,
                    favorites_page=favorites_page-1) }}"><i class="material-icons">arrow_left</i></a></li>
            {% else %}
            <li class="disabled"><i class="material-icons">arrow_left</i></li>
            {% endif %}
            <!--Page Numbers-->
            {% for fv_page_number in fv_pages %} {% if fv_page_number == favorites_page %}
            <li class="active"><a>{{ fv_page_number }}</a></li>
            {% else %}
            <li class="waves-effect"><a href="{{ url_for('account',
                account_name = session.username,
                drinks_page=drinks_page,
                favorites_page=fv_page_number) }}">{{ fv_page_number }}</a></li>
            {% endif %} {% endfor %}
            <!--Right Arrow-->
            {% if favorites_page | int
            < fv_pages | count | int %} <li class=""><a href="{{ url_for('account',
                    account_name = session.username,
                    drinks_page=drinks_page,
                    favorites_page=favorites_page+1) }}"><i class="material-icons">arrow_right</i></a></li>
                {% else %}
                <li class="disabled"><i class="material-icons">arrow_right</i></li>
                {% endif %}
        </ul>
        {% endif %}
    </div>
</div>

{% endblock %}
