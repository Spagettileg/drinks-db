{% extends 'base.html' %} {% block content %}

<div class="page-container content-wrapper">
    <div id="drink-wrapper">
        <!--Drink Title & Info-->
        <div class="row center">
            <h2>{{drink.name}}</h2>

            {% if (session['username'] == drink.userName) or (session['username'] == "Admin") %}
            <div>
                <a href="{{ url_for('edit_drink', drink_id = drink._id) }}" class="btn btn--black">EDIT</a> {% include 'helpers/delete_modal.html' %}
            </div>
            {% endif %}

            <div class="drink-author">
                <h6>Drink submitted by {{drink.userName}} on {{date}}</h6>
            </div>
        </div>

        <!--Picture | Ingredients-->
        <div class="row">
            <div id="drink-img" class="col s12 l4">
                <img width="375" height="375" src="{{drink.imageUrl}}" class="responsive-img materialboxed" data-caption="{{drink.name}} in category {{drink.category|title()}}">
            </div>

            <div class="col s12 l8">
                <div id="ingredients-box" class="qz-depth-2">
                    <h4 class="border-color--pink">Ingredients</h4>
                    <ul>
                        <table>
                            <thead>
                                <tr>
                                    <th>Measure</th>
                                    <th>Ingredient</th>
                                </tr>
                            </thead>
                            {% for i in range(0, drink.ingredients | length, 2) %}
                            <tbody>
                                <tr>
                                    <td class="measure-width">{{drink.ingredients[i]}}</td>
                                    <td>{{drink.ingredients[i+1]}}</td>
                                </tr>
                            </tbody>
                            {% endfor %}
                        </table>
                    </ul>
                </div>
            </div>
        </div>

        <!--Instructions | Category | Difficultly | Glass-->
        <div class="row eq-height-columns pd-fix">
            <!--Category & Difficulty - Medium Only-->
            <div class="col s12 show-on-medium-and-down hide-on-large-only">
                <div class="row center">
                    <div class="col s12 m6">
                        <h6>Category <span class="info-label white">{{drink.category|upper()}}</span></h6>
                    </div>
                    <div class="col s12 m6">
                        {% if views == 1 %}
                        <h6>Viewed <span class="info-label white">{{views}}</span> time.</h6>
                        {% else %}
                        <h6>Viewed <span class="info-label white">{{views}}</span> times.</h6>
                        {% endif %}
                    </div>
                    <div class="col s12 m6">
                        <h6>Favorite Lists <span class="info-label white">{{drink.favorites}}</span></h6>
                    </div>
                    <div class="col s12 m6">
                        <h6>Comments <span class="info-label white">{{comment_user|count()}}</span></h6>
                    </div>
                    <div class="col s12 m6">
                        <h6>Difficulty <span class="info-label white">{{drink.difficulty|upper()}}</span></h6>
                    </div>
                </div>
            </div>

            <!--Instructions-->
            <div id="instructions-box" class="col s12 m6 l4 qz-depth-2">
                <h4 class="border-color--purple">Instructions</h4>
                <table>
                    <tbody>
                        {% for i in instructions %}
                        <tr>
                            <td>{{i}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!--Glass Image-->
            <div id="glass-img" class="col s12 m6 l5 center">
                <img width="375" src="{{ url_for('static', filename='images/glass/g_'+drink.glassType+'.jpg') }}" class="responsive-img materialboxed" data-caption="{{drink.glassType|title()}} glass">
                <h5>Serve in a {{drink.glassType|title()}} glass.</h5>
            </div>

            <!--Info Box - Category | Views | Difficulty-->
            <div id="info-box" class="col hide-on-med-and-down l3 qz-depth-2">
                <h4 class="border-color--green">Extra Info</h4>
                <div class="row">
                    <div class="col s12">
                        {% if views == 1 %}
                        <h6>Viewed <span class="info-label white">{{views}}</span> time.</h6>
                        {% else %}
                        <h6>Viewed <span class="info-label white">{{views}}</span> times.</h6>
                        {% endif %}
                    </div>
                    <div class="col s12">
                        <h6>Category <span class="info-label white">{{drink.category|upper()}}</span></h6>
                    </div>
                    <div class="col s12">
                        <h6>Comments <span class="info-label white">{{comment_user|count()}}</span></h6>
                    </div>
                    <div class="col s12">
                        <h6>Difficulty: <span class="info-label white">{{drink.difficulty|upper()}}</span></h6>
                    </div>
                    <div class="col s12">
                        <h6>Favorite Lists <span class="info-label white">{{drink.favorites}}</span></h6>
                    </div>
                </div>
            </div>
        </div>

        <!--Favorites | Quote-->
        <div class="row pd-fix">
            <!--Favorites-->
            <div id="favorites-box" class="col s12 l6 center">
                <h4 class="border-color--pink">Favorites</h4>
                <!--Add as favorite-->
                {% if not session %}
                <p class="white-border">You must be logged in to add as a favorite</p>
                {% elif session['username'] == drink.userName %}
                <p class="white-border">You cannot add your own drinks to your favorites</p>
                {% else %} {% if is_favorite %}
                <div>
                    {{drink.name}} is in your favorites list!
                </div>
                <div>
                    <i class="fas fa-heart red-text text-darken-1"></i>
                </div>
                <div>
                    <a href="{{ url_for('toggle_favorite', drink_id = drink._id, is_favorite=is_favorite) }}" class="btn btn--black">Remove Favorite</a>
                </div>
                {% else %}
                <div>
                    {{drink.name}} is not in your favorites list!
                </div>
                <div>
                    <i class="fas fa-heart-broken red-text text-darken-4"></i>
                </div>
                <div>
                    <a href="{{ url_for('toggle_favorite', drink_id = drink._id, is_favorite=is_favorite) }}" class="btn btn--black">Add Favorite</a>
                </div>
                {% endif %} {% endif %}
                <!--Displays num favorites-->
                {% if drink.favorites
                < 1 %} <h5>Not yet favorited by any users</h5>

                    {% else %}

                    <h5>Favorited By These Users</h5>

                    {% for x in drink.favoritesTxt %}

                    <div class="fave-label">{{x}}</div>

                    {% endfor %} {% endif %}
            </div>
            <!--Quote-->
            <div id="quote-box" class="col s12 l6 center z-depth-3">
                <img src="{{ url_for('static', filename='images/swirls/swirl.png') }}" class="swirl-top">
                <p class="quote-text">{{quote_text}}</p>
                <p class="quote-name right-align">- {{quote_name}}</p>
                <img src="{{ url_for('static', filename='images/swirls/swirl.png') }}" class="swirl-bottom">
            </div>
        </div>

        <!--Comments-->
        <div class="row">
            <div id="comments-box" class="col s12">
                <h4 class="border-color--green">Comments</h4>
                <p>Tell us what you think!</p>

                <div class="comment-box z-depth-2">
                    {% if comment_user | length > 0 %} {% for x in range(0, comment_user | length) %}

                    <p class="comment-user">{{comment_user[x]}}</p>
                    <p class="comment-text">{{comment_text[x]}}</p>

                    {% endfor %} {% else %}

                    <h6>There are no comments for this drink yet.</h6>
                    <h6>Why don't you be the first?</h6>

                    {% endif %}
                </div>

                <h5>Leave a comment</h5>
                <div class="row">
                    <form action="{{ url_for('drink', drink_id = drink._id) }}" method="POST" class="col s12">
                        {% if session %}
                        </span><input placeholder="Type your comment here" id="comment" name="comment" type="text">
                        <button class="btn right btn--black" type="submit">Send</button> {% else %}
                        </span><input disabled placeholder="You must be logged in to leave a comment" id="comment" name="comment" type="text">
                        <button disabled class="btn right btn--black" type="submit">Send</button> {% endif %}
                    </form>
                </div>
            </div>
        </div>


        <!--Edit | Delete Drink-->
        <div class="row center">
            {% if (session['username'] == drink.userName) or (session['username'] == "Admin") %}
            <a href="{{ url_for('edit_drink', drink_id = drink._id) }}" class="btn btn--black">EDIT</a> {% include 'helpers/delete_modal.html' %} {% else %}
            <a class="grey darken-2 grey-text text-lighten-2 btn btn--black tooltipped" data-position="bottom" data-tooltip="You can only edit your own drinks">EDIT</a>
            <a class="grey darken-2 grey-text text-lighten-2 btn btn--black tooltipped" data-position="bottom" data-tooltip="You can only delete your own drinks">DELETE DRINK</a> {% endif %}
        </div>
    </div>
</div>

{% endblock %}
